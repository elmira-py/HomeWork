# Домашнее задание по Python

IT-отдел крупного банка делает новую фичу для личного кабинета клиента. Это виджет, 
который показывает несколько последних успешных банковских операций клиента.

## Установка:
1. Клонируйте репозиторий:
SSH key - git@github.com:elmira-py/HomeWork.git
2. https://github.com/elmira-py/HomeWork.git

## Модуль masks
Содержит функции для наложения масок на конфиденциальные данные:

**get_mask_card_number(card_number: str) -> str**

Маскирует номер банковской карты в формате: XXXX XX** **** XXXX
Пример: 7000792289606361 → 7000 79** **** 6361

**get_mask_account(account_number: str) -> str**

Маскирует номер счета в формате: **XXXX
**Пример:** 73654108430135874305 → **4305

## Модуль widget
Содержит функции для работы с банковскими данными:

**mask_account_card(card_or_account_data: str) -> str**

Автоматически определяет тип данных (карта или счет) и применяет соответствующую маску.
**Пример для карты:** Visa Platinum 7000792289606361 → Visa Platinum 7000 79** **** 6361
**Пример для счета:** Счет 73654108430135874305 → Счет **4305

**def get_date(date_string: str) -> str**
Функция берёт данные даты и времени в формате "2024-03-11T02:26:18.671407"
и возвращает только дату в формате 'ДД.ММ.ГГГГ'"""
Пример: get_date("2024-03-11T02:26:18.671407") -> "11.03.2024"
Возвращает пустую строку, если формат некорректен или данных недостаточно

## Модуль processing
 Модуль processing предоставляет функции для фильтрации и сортировки банковских операций.

filter_by_state(transactions: list[dict], state: str = "EXECUTED") -> list[dict]
Фильтрует операции по значению ключа "state".

Пример:
transactions = [
    {"id": 1, "state": "EXECUTED", "date": "2024-01-01T12:00:00"},
    {"id": 2, "state": "CANCELED", "date": "2024-01-02T12:00:00"}
]

filter_by_state(transactions):
    [{"id": 1, "state": "EXECUTED", "date": "2024-01-01T12:00:00"}]
**Параметры:**
transactions: Список словарей с операциями
state: Статус для фильтрации. По умолчанию 'EXECUTED'

sort_by_date(transactions: list[dict], reverse: bool = True) -> list[dict]
Сортирует операции по полю "date" (строка в ISO-формате).

reverse=True (по умолчанию) — новые операции первыми.
reverse=False — старые операции первыми.
Пример:
transactions = [
    {"date": "2023-12-01T00:00:00"},
    {"date": "2024-01-01T00:00:00"}
]
sort_by_date(transactions, reverse=False)
 [{"date": "2023-12-01T00:00:00"}, {"date": "2024-01-01T00:00:00"}]

## Модуль generators
с функцией filter_by_currency, которая принимает на вход список словарей,
представляющих транзакции. Функция должна возвращать итератор, который поочередно
выдает транзакции, где валюта операции соответствует заданной (например, USD).
 Пример: 
usd_transactions = filter_by_currency(transactions, "USD")
for _ in range(2):
    print(next(usd_transactions))
>>>{
      "id": 939719570,
          "state": "EXECUTED",
          "date": "2018-06-30T02:08:58.425572",
          "operationAmount": {
              "amount": "9824.07",
              "currency": {
                  "name": "USD",    
                  "code": "USD"
              }
          },
          "description": "Перевод организации",
          "from": "Счет 75106830613657916952",
          "to": "Счет 11776614605963066702"
      }
      {
              "id": 142264268,
              "state": "EXECUTED",
              "date": "2019-04-04T23:20:05.206878",
              "operationAmount": {
                  "amount": "79114.93",
                  "currency": {
                      "name": "USD",
                      "code": "USD"
                  }
              },
              "description": "Перевод со счета на счет",
              "from": "Счет 19708645243227258542",
              "to": "Счет 75651667383060284188"
       }

с функцией transaction_descriptions(transactions: list[dict]) -> Iterator[str], которая
принимает список словарей с транзакциями и возвращает описание каждой операции по очереди.
Пример: descriptions = transaction_descriptions(transactions)
for _ in range(5):
    print(next(descriptions))

>>> Перевод организации
    Перевод со счета на счёт
    Перевод со счета на счёт
    Перевод с карты на карту
    Перевод организации

с функцией card_number_generator(start: int, stop: int) -> Iterator[str], который выдает 
номера банковских карт  в формате XXXX XXXX XXXX XXXX, где X — цифра номера карты.
Генератор может сгенерировать номера карт в заданном диапазоне от 0000 0000 0000 0001 до 
9999 9999 9999 9999. 
Генератор должен принимать начальное и конечное значения для генерации диапазона номеров.
Пример: for card_number in card_number_generator(1, 5):
    print(card_number)

>>> 0000 0000 0000 0001
    0000 0000 0000 0002
    0000 0000 0000 0003
    0000 0000 0000 0004
    0000 0000 0000 0005


## Тестирование
Добавлен раздел "tests" с папками- тестами для каждой функции с параметризацией, также добавлена 
папка "conftest.py" с фикстурами для функций.
Проект полностью покрыт автоматическими тестами с использованием `pytest`.  
Покрытие исходного кода составляет **98%**.

### Запуск тестов
Убедитесь, что установлены зависимости (включая `pytest`), затем выполните:
```bash
pytest
В репозитории сохранён HTML-отчёт о покрытии кода тестами.
Чтобы просмотреть его:

Перейдите в папку htmlcov/
Откройте файл index.html в браузере



# Разработка:

+ Проект находится в активной разработке. В ближайших планах:

+ Добавление новых модулей для расширения функционала

+ Улучшение обработки различных форматов данных

+ Добавление тестов

# Команда проекта
elmira-py - Beginner Python developer

*Проект разработан в рамках учебного курса SkyPro*
